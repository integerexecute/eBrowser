<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="eBrowser.Windows.Views.Pages.PostsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:eBrowser.Windows.Views.Pages"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    NavigationCacheMode="Required"
    mc:Ignorable="d">
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="240"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" Margin="12" Spacing="12">
            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button x:Name="BtnBack"
                    Content="◀"
                    Grid.Column="0"
                    HorizontalAlignment="Left"/>

                <TextBlock x:Name="PageLabel"
                    Grid.Column="1"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Text="1 / 10" />

                <Button x:Name="BtnNext"
                    Content="▶"
                    Grid.Column="2"
                    HorizontalAlignment="Right"/>
            </Grid>

            <ComboBox x:Name="SortBox" HorizontalAlignment="Stretch" SelectedIndex="0" SelectionChanged="SortBox_SelectionChanged">
                <ComboBoxItem Content="Date"/>
                <ComboBoxItem Content="Favorites"/>
                <ComboBoxItem Content="Score"/>
            </ComboBox>

            <TextBlock Text="Search History" FontWeight="Bold" Margin="0,8,0,4"/>
            <ListBox x:Name="SearchHistoryList" Height="200"/>

            <TextBlock Text="Image Grid Settings" FontWeight="Bold" Margin="0,16,0,6"/>

            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="8">
                <TextBlock Text="Columns:" VerticalAlignment="Center"/>
                <muxc:NumberBox x:Name="ColumnCountBox" Width="80" Minimum="1" Maximum="10" Value="4" ValueChanged="ColumnCountBox_ValueChanged"/>
            </StackPanel>
        </StackPanel>

        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Margin="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox x:Name="SearchBox"
                    Height="34"
                    Grid.Column="0"
                    Margin="0,0,8,0"
                    PlaceholderText="Search here..." />

                <Button x:Name="BtnSearch"
                    Grid.Column="1"
                    Content="Search"
                    Width="100"
                    Height="34"/>
            </Grid>

            <GridView x:Name="ImageGridView"
                Loaded="ImageGridView_Loaded"
                Grid.Row="1"
                Margin="5"
                IsItemClickEnabled="True"
                SelectionMode="None"
                ItemClick="ImageGridView_ItemClick"
                ItemsSource="{x:Bind ShownPosts, Mode=OneWay}">

                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <ItemsWrapGrid x:Name="ImageItemsWrapGrid"
                            Orientation="Horizontal"
                            MaximumRowsOrColumns="{Binding ElementName=ColumnCountBox, Path=Value, Mode=OneWay}"/>
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>

                <GridView.ItemTemplate>
                    <DataTemplate x:DataType="posts:ePost" xmlns:posts="using:e621NET.Data.Posts">
                        <Border CornerRadius="6" Margin="6" BorderThickness="1" BorderBrush="#444">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="30"/>
                                </Grid.RowDefinitions>
                                <Image Source="{Binding Preview.Url}" Stretch="UniformToFill"/>
                                <Grid Grid.Row="1">
                                    <TextBlock Margin="5" HorizontalAlignment="Center" Text="{Binding PreviewText}"/>
                                </Grid>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </GridView.ItemTemplate>
            </GridView>
        </Grid>
    </Grid>
</Page>
